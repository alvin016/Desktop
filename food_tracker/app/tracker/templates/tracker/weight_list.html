{% extends "base.html" %}
{% block title %}é«”é‡ç´€éŒ„{% endblock %}
{% block head_extra %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}
{% block content %}
<h2>ğŸ“Š é«”é‡ç´€éŒ„</h2>
<a href="{% url 'add_weight' %}" class="btn btn-success mb-4">â• æ–°å¢ç´€éŒ„</a>
<canvas id="weightChart" height="100"></canvas>
<table class="table table-striped mt-4">
  <thead>
    <tr><th>æ—¥æœŸ</th><th>é«”é‡</th><th>é«”è„‚</th><th>å…§è‡Ÿ</th><th>è‚Œè‚‰</th><th>BMI</th><th>BMR</th><th>å¹´é½¡</th></tr>
  </thead>
  <tbody>
    {% for record in records %}
      <tr>
        <td>{{ record.date }}</td><td>{{ record.weight }}</td><td>{{ record.body_fat }}</td>
        <td>{{ record.visceral_fat }}</td><td>{{ record.muscle_rate }}</td><td>{{ record.bmi }}</td>
        <td>{{ record.bmr }}</td><td>{{ record.body_age }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
{% block script_extra %}
<script>
const ctx = document.getElementById('weightChart').getContext('2d');
new Chart(ctx, {
  type: 'line',
  data: {
    labels: {{ labels|safe }},
    datasets: [
      { label: 'é«”é‡', data: {{ weights|safe }}, borderColor: 'blue', tension: 0.3 },
      { label: 'é«”è„‚ç‡', data: {{ body_fats|safe }}, borderColor: 'red', tension: 0.3 },
    ]
  },
  options: { responsive: true, scales: { y: { beginAtZero: false } } }
});
</script>
{% endblock %}
